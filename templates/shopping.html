{% extends "base.html" %}

{% block title %}Shopping - ONDA{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/shopping.css') }}">
<link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="shopping-hero">
    <div class="hero-overlay"></div>
    <div class="floating-shops">
        <div class="floating-shop shop-1">
            <i class="fas fa-shopping-bag"></i>
        </div>
        <div class="floating-shop shop-2">
            <i class="fas fa-store"></i>
        </div>
        <div class="floating-shop shop-3">
            <i class="fas fa-gift"></i>
        </div>
        <div class="floating-shop shop-4">
            <i class="fas fa-shopping-cart"></i>
        </div>
    </div>
    <div class="container">
        <div class="row align-items-center min-vh-50">
            <div class="col-lg-6" data-aos="fade-right">
                <h1 class="hero-title">Shopping & Boutiques</h1>
                <p class="hero-subtitle">D√©couvrez une exp√©rience shopping unique dans nos a√©roports avec une s√©lection de boutiques, souks traditionnels et centres commerciaux modernes</p>
                <div class="hero-buttons">
                    <a href="#shopping-search" class="btn btn-primary btn-lg me-3">
                        <i class="fas fa-search me-2"></i>D√©couvrir
                    </a>
                    <a href="#shopping-info" class="btn btn-outline-light btn-lg">
                        <i class="fas fa-info-circle me-2"></i>Informations
                    </a>
                </div>
            </div>
            <div class="col-lg-6" data-aos="fade-left">
                <div class="hero-stats">
                    <div class="stat-card" data-aos="fade-up" data-aos-delay="200">
                        <div class="stat-icon">
                            <i class="fas fa-store-alt"></i>
                        </div>
                        <div class="stat-content">
                            <h3>{{ shops|length }}</h3>
                            <p>Boutiques</p>
                        </div>
                    </div>
                    <div class="stat-card" data-aos="fade-up" data-aos-delay="400">
                        <div class="stat-icon">
                            <i class="fas fa-tags"></i>
                        </div>
                        <div class="stat-content">
                            <h3>24/7</h3>
                            <p>Ouvert</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Shopping Search & Filters -->
<section id="shopping-search" class="py-5">
    <div class="container">
        <div class="row">
            <!-- Sidebar Filters -->
            <div class="col-lg-3 mb-4">
                <div class="filter-sidebar" data-aos="fade-right">
                    <div class="filter-header">
                        <h4><i class="fas fa-filter me-2"></i>Filtres de Recherche</h4>
                    </div>
                    
                    <div class="filter-group">
                        <label class="filter-label">Ville</label>
                        <select class="form-select filter-select" id="cityFilter">
                            <option value="">Toutes les villes</option>
                            {% set cities = [] %}
                            {% for shop in shops %}
                                {% if shop.city not in cities %}
                                    {% set _ = cities.append(shop.city) %}
                                    <option value="{{ shop.city }}">{{ shop.city }}</option>
                                {% endif %}
                            {% endfor %}
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label class="filter-label">Type de Commerce</label>
                        <select class="form-select filter-select" id="typeFilter">
                            <option value="">Tous les types</option>
                            {% set types = [] %}
                            {% for shop in shops %}
                                {% if shop.type not in types %}
                                    {% set _ = types.append(shop.type) %}
                                    <option value="{{ shop.type }}">
                                        {% if shop.type == 'mall' %}üè¨ Centre Commercial
                                        {% elif shop.type == 'souk' %}üè™ Souk Traditionnel
                                        {% elif shop.type == 'market' %}üõí March√©
                                        {% elif shop.type == 'boutique' %}üëó Boutique
                                        {% else %}{{ shop.type.title() }}
                                        {% endif %}
                                    </option>
                                {% endif %}
                            {% endfor %}
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label class="filter-label">Recherche</label>
                        <div class="search-box">
                            <input type="text" class="form-control" id="searchInput" placeholder="Rechercher une boutique...">
                            <i class="fas fa-search search-icon"></i>
                        </div>
                    </div>
                    
                    <button class="btn btn-outline-primary w-100 mt-3" id="clearFilters">
                        <i class="fas fa-times me-2"></i>Effacer les filtres
                    </button>
                    
                    <!-- Quick Links -->
                    <div class="quick-links mt-4">
                        <h5>Liens Rapides</h5>
                        <ul class="list-unstyled">
                            <li><a href="#"><i class="fas fa-map-marker-alt me-2"></i>Plan des boutiques</a></li>
                            <li><a href="#"><i class="fas fa-clock me-2"></i>Horaires d'ouverture</a></li>
                            <li><a href="#"><i class="fas fa-percentage me-2"></i>Promotions</a></li>
                            <li><a href="#"><i class="fas fa-credit-card me-2"></i>Moyens de paiement</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Shopping Cards -->
            <div class="col-lg-9">
                <div class="shopping-header mb-4" data-aos="fade-up">
                    <h2>Boutiques & Centres Commerciaux</h2>
                    <p class="text-muted">Profitez d'une exp√©rience shopping exceptionnelle</p>
                </div>
                
                <div class="row" id="shoppingCards">
                    {% for shop in shops %}
                    <div class="col-md-6 col-lg-4 mb-4 shopping-card" 
                         data-city="{{ shop.city }}" 
                         data-type="{{ shop.type }}"
                         data-aos="fade-up" 
                         data-aos-delay="{{ loop.index0 * 100 }}">
                        <div class="shopping-item">
                            <div class="shopping-badge">
                                {% if shop.type == 'mall' %}
                                    <i class="fas fa-building"></i>
                                {% elif shop.type == 'souk' %}
                                    <i class="fas fa-store-alt"></i>
                                {% elif shop.type == 'market' %}
                                    <i class="fas fa-shopping-basket"></i>
                                {% elif shop.type == 'boutique' %}
                                    <i class="fas fa-tshirt"></i>
                                {% else %}
                                    <i class="fas fa-shopping-bag"></i>
                                {% endif %}
                            </div>
                            
                            <div class="shopping-content">
                                <h4 class="shopping-name">{{ shop.name }}</h4>
                                <div class="mb-2">
                                    <span class="type-badge {{ shop.type }}">
                                        {% if shop.type == 'mall' %}Centre Commercial
                                        {% elif shop.type == 'souk' %}Souk Traditionnel
                                        {% elif shop.type == 'market' %}March√©
                                        {% elif shop.type == 'boutique' %}Boutique
                                        {% else %}{{ shop.type.title() }}
                                        {% endif %}
                                    </span>
                                </div>
                                <p class="shopping-description">{{ shop.description or 'D√©couvrez une s√©lection unique de produits et services dans un cadre moderne et accueillant.' }}</p>
                                
                                <div class="shopping-details">
                                    <div class="detail-item">
                                        <i class="fas fa-map-marker-alt"></i>
                                        <span>{{ shop.city }}</span>
                                    </div>
                                    {% if shop.address %}
                                    <div class="detail-item">
                                        <i class="fas fa-location-arrow"></i>
                                        <span>{{ shop.address }}</span>
                                    </div>
                                    {% endif %}
                                    {% if shop.opening_hours %}
                                    <div class="detail-item hours">
                                        <i class="fas fa-clock"></i>
                                        <span>{{ shop.opening_hours }}</span>
                                    </div>
                                    {% endif %}
                                </div>
                                
                                <div class="shopping-actions">
                                    <button class="btn btn-primary btn-sm">
                                        <i class="fas fa-directions me-1"></i>Localiser
                                    </button>
                                    <button class="btn btn-outline-primary btn-sm">
                                        <i class="fas fa-info-circle me-1"></i>D√©tails
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                
                <!-- No Results Message -->
                <div id="noResults" class="text-center py-5" style="display: none;">
                    <i class="fas fa-search fa-3x text-muted mb-3"></i>
                    <h4 class="text-muted">Aucune boutique trouv√©e</h4>
                    <p class="text-muted">Essayez de modifier vos crit√®res de recherche</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Shopping Info Section -->
<section id="shopping-info" class="py-5 bg-light">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 mx-auto text-center" data-aos="fade-up">
                <h2 class="mb-4">Services & Avantages</h2>
                <p class="lead mb-5">Tout ce que vous devez savoir sur nos espaces commerciaux</p>
            </div>
        </div>
        
        <div class="row">
            <div class="col-md-4 mb-4" data-aos="fade-up" data-aos-delay="100">
                <div class="info-card">
                    <div class="info-icon">
                        <i class="fas fa-credit-card"></i>
                    </div>
                    <h4>Paiement Facile</h4>
                    <p>Acceptation de tous les moyens de paiement : cartes bancaires, esp√®ces, paiement mobile et devises √©trang√®res</p>
                </div>
            </div>
            
            <div class="col-md-4 mb-4" data-aos="fade-up" data-aos-delay="200">
                <div class="info-card">
                    <div class="info-icon">
                        <i class="fas fa-gift"></i>
                    </div>
                    <h4>Duty Free</h4>
                    <p>Profitez des achats hors taxes avec une large s√©lection de produits de luxe, parfums, alcools et souvenirs</p>
                </div>
            </div>
            
            <div class="col-md-4 mb-4" data-aos="fade-up" data-aos-delay="300">
                <div class="info-card">
                    <div class="info-icon">
                        <i class="fas fa-shipping-fast"></i>
                    </div>
                    <h4>Livraison</h4>
                    <p>Service de livraison disponible pour vos achats volumineux directement √† votre destination</p>
                </div>
            </div>
        </div>
    </div>
</section>

<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<script>
// Initialize AOS
AOS.init({
    duration: 800,
    easing: 'ease-in-out',
    once: true
});

// Shopping filtering functionality
document.addEventListener('DOMContentLoaded', function() {
    const cityFilter = document.getElementById('cityFilter');
    const typeFilter = document.getElementById('typeFilter');
    const searchInput = document.getElementById('searchInput');
    const clearFilters = document.getElementById('clearFilters');
    const shoppingCards = document.querySelectorAll('.shopping-card');
    const noResults = document.getElementById('noResults');

    function filterShopping() {
        const selectedCity = cityFilter.value.toLowerCase();
        const selectedType = typeFilter.value.toLowerCase();
        const searchTerm = searchInput.value.toLowerCase();
        let visibleCount = 0;

        shoppingCards.forEach(card => {
            const cardCity = card.getAttribute('data-city').toLowerCase();
            const cardType = card.getAttribute('data-type').toLowerCase();
            const cardText = card.textContent.toLowerCase();

            const cityMatch = !selectedCity || cardCity.includes(selectedCity);
            const typeMatch = !selectedType || cardType === selectedType;
            const searchMatch = !searchTerm || cardText.includes(searchTerm);

            if (cityMatch && typeMatch && searchMatch) {
                card.style.display = 'block';
                visibleCount++;
            } else {
                card.style.display = 'none';
            }
        });

        // Show/hide no results message
        noResults.style.display = visibleCount === 0 ? 'block' : 'none';
    }

    function clearAllFilters() {
        cityFilter.value = '';
        typeFilter.value = '';
        searchInput.value = '';
        filterShopping();
    }

    // Event listeners
    cityFilter.addEventListener('change', filterShopping);
    typeFilter.addEventListener('change', filterShopping);
    searchInput.addEventListener('input', filterShopping);
    clearFilters.addEventListener('click', clearAllFilters);

    // Smooth scrolling for hero buttons
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });
});
</script>
{% endblock %}
